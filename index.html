<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸í”Œë£¨ì–¸ì„œ ìŠ¤í¬ë¦¬ë‹ í†µí•© ì‹œíŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background-color: #f5f5f5;
        }

        .tab-container {
            background: white;
            border-bottom: 1px solid #ddd;
        }

        .tabs {
            display: flex;
            max-width: 1600px;
            margin: 0 auto;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            background: #3498db;
            color: white;
            border-bottom: 3px solid #2980b9;
        }

        .tab:hover:not(.active) {
            background: #ecf0f1;
        }

        .content {
            max-width: 1600px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow-x: auto
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
        }

        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            font-size: 12px;
        }

        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }

        .priority-s {
            background-color: #8e44ad;
            color: white;
        }

        .priority-a {
            background-color: #2ecc71;
            color: white;
        }

        .priority-b {
            background-color: #f39c12;
            color: white;
        }

        .priority-c {
            background-color: #95a5a6;
            color: white;
        }

        .priority-d {
            background-color: #e74c3c;
            color: white;
        }

        .score-input {
            width: 40px;
            text-align: center;
            border: none;
            background: transparent;
        }

        .total-score {
            font-weight: bold;
            font-size: 14px;
        }

        .add-btn,
        .delete-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .delete-btn {
            background: #e74c3c;
            padding: 5px 10px;
            font-size: 11px;
        }

        .add-btn:hover {
            background: #2980b9;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .budget-info {
            background: #e8f5e8;
            padding: 15px;
            border-left: 4px solid #2ecc71;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
        }

        .firebase-status {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            text-align: center;
        }

        .firebase-error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            text-align: center;
        }

        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ë“¤ ë™ì¼í•˜ê²Œ ìœ ì§€ */
        .sprint-week {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
        }

        .week-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .team-task {
            background: white;
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            border-left: 3px solid #e74c3c;
        }

        .checklist-item {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #2ecc71;
        }

        .scoring-guide {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .outreach-strategy {
            background: #f0f8ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }

        .immediate-tasks {
            background: #ffe6e6;
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid #e74c3c;
        }

        .task-day {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #f39c12;
        }
    </style>
</head>

<body>
    <div class="tab-container">
        <div class="tabs">
            <div class="tab active" onclick="showTab('main')">ë©”ì¸ ìŠ¤í¬ë¦¬ë‹</div>
            <div class="tab" onclick="showTab('checklist')">ì²´í¬ë¦¬ìŠ¤íŠ¸ ê°€ì´ë“œ</div>
            <div class="tab" onclick="showTab('sprint')">3ì£¼ ìŠ¤í”„ë¦°íŠ¸ í”Œëœ</div>
            <div class="tab" onclick="showTab('reddit')">Reddit ë°”ì´ëŸ´ ì²´í¬</div>
            <div class="tab" onclick="showTab('outreach')">ì¸í”Œë£¨ì–¸ì„œ ëŒ€ì‘ ì „ëµ</div>
            <div class="tab" onclick="showTab('tasks')">ë‹¹ì¥ í•  ì¼</div>
        </div>
    </div>

    <div class="content">
        <!-- Firebase ìƒíƒœ í‘œì‹œ -->
        <div id="firebaseStatus" class="loading">ğŸ”„ Firebase ì—°ê²° ì¤‘...</div>

        <!-- ë©”ì¸ ìŠ¤í¬ë¦¬ë‹ íƒ­ -->
        <div id="main" class="tab-content active">
            <h1>10ì›” ì•„ë§ˆì¡´ ë¹…ì´ë²¤íŠ¸ ì¸í”Œë£¨ì–¸ì„œ ìŠ¤í¬ë¦¬ë‹ ì‹œíŠ¸</h1>

            <div class="budget-info">
                <h3>ğŸ¯ ëª©í‘œ</h3>
                <strong>10ì›” ì˜ˆì‚°: 2ì–µì›</strong><br>
                <strong>ë¦¬ìŠ¤íŒ… ëª©í‘œ:</strong> ì´ 100ëª… ì¸í”Œë£¨ì–¸ì„œ ë¦¬ìŠ¤íŒ…<br>
                <strong>ìµœì¢… ëª©í‘œ:</strong> 10ëª… í˜‘ì—… ì„±ì‚¬ (Sê¸‰ 2ëª… + Aê¸‰ 8ëª…)<br>
                <strong>ì»¨íƒ ëª©í‘œ:</strong> 30ëª… ì´ìƒ ì»¨íƒ (ì‘ë‹µë¥  30% ê°€ì •)<br>
                <strong>ë§ˆê°:</strong> 9ì›” 15ì¼ê¹Œì§€ 1ì°¨ ì»¨íƒ ì™„ë£Œ<br>
                <strong>í”Œë«í¼:</strong> Instagram + TikTok | <strong>íŒ€ì›:</strong> ì‹ í¬ê²½, ìµœì—°ì£¼, ê¹€ìœ ì§„
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalCandidates">0</div>
                    <div class="stat-label">ì´ í›„ë³´</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="aPriority">0</div>
                    <div class="stat-label">S+Aê¸‰</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="contacted">0</div>
                    <div class="stat-label">ì»¨íƒì™„ë£Œ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="responded">0</div>
                    <div class="stat-label">ë‹µì¥ë°›ìŒ</div>
                </div>
            </div>

            <div class="scoring-guide">
                <strong>ğŸ“Š ìµœì†Œ ê¸°ì¤€:</strong><br>
                â€¢ <strong>Instagram:</strong> íŒ”ë¡œì›Œ 30ë§Œ+ (ì°¸ì—¬ìœ¨ 3%+ í•„ìˆ˜)<br>
                â€¢ <strong>TikTok:</strong> íŒ”ë¡œì›Œ 50ë§Œ+ (ìµœê·¼ 1ê°œì›” ì¡°íšŒìˆ˜ í‰ê·  10ë§Œ+)<br>
                â€¢ <strong>ê³µí†µ:</strong> ìµœê·¼ 3ê°œì›” í™œë™, ë·°í‹°/ë¼ì´í”„ìŠ¤íƒ€ì¼ ê´€ë ¨ ì½˜í…ì¸  50%+<br>
                <strong>ì ìˆ˜ ê¸°ì¤€:</strong> Sê¸‰(90+ì ) ìµœìš°ì„  | Aê¸‰(80+ì ) ì¦‰ì‹œì»¨íƒ | Bê¸‰(60-79ì ) ì¡°ê±´ë¶€ | Cê¸‰(40-59ì ) ë³´ë¥˜ | Dê¸‰(40ì  ë¯¸ë§Œ) ì œì™¸
            </div>

            <button class="add-btn" onclick="addInfluencer()">+ ì¸í”Œë£¨ì–¸ì„œ ì¶”ê°€</button>

            <table id="influencerTable">
                <thead>
                    <tr>
                        <th>ìˆœë²ˆ</th>
                        <th>ì¸í”Œë£¨ì–¸ì„œëª…</th>
                        <th>í”Œë«í¼</th>
                        <th>ë¸Œëœë“œ</th>
                        <th>íŒ”ë¡œì›Œìˆ˜</th>
                        <th>ì°¸ì—¬ìœ¨</th>
                        <th>êµ¬ë§¤ë ¥<br>(20ì )</th>
                        <th>ì‹ ë¢°ì„±<br>(25ì )</th>
                        <th>ì»¤ë®¤ë‹ˆí‹°<br>(20ì )</th>
                        <th>íƒ€ê²Ÿë§¤ì¹­<br>(20ì )</th>
                        <th>ì‹¤ì‚¬ìš©<br>(15ì )</th>
                        <th>Reddit<br>(10ì )</th>
                        <th>ì´ì </th>
                        <th>ë“±ê¸‰</th>
                        <th>ë‹´ë‹¹ì</th>
                        <th>ì»¨íƒìƒíƒœ</th>
                        <th>í¬ë§ë‹¨ê°€</th>
                        <th>ë©”ëª¨</th>
                        <th>ì‚­ì œ</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- ë°ì´í„°ëŠ” Firebaseì—ì„œ ë¡œë“œë¨ -->
                </tbody>
            </table>
        </div>

        <!-- ë‚˜ë¨¸ì§€ íƒ­ë“¤ì€ ê¸°ì¡´ê³¼ ë™ì¼ -->
        <div id="checklist" class="tab-content">
            <h2>ğŸ“‹ ì ìˆ˜ ë§¤ê¸°ê¸° ê°€ì´ë“œ (íŒ€ì›ìš©)</h2>
            <!-- ê¸°ì¡´ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë‚´ìš© ë™ì¼ -->
        </div>

        <!-- ë‹¤ë¥¸ íƒ­ë“¤ë„ ê¸°ì¡´ ë‚´ìš© ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // âš ï¸ ì—¬ê¸°ì— Firebase ì„¤ì •ì„ ë„£ìœ¼ì„¸ìš” (Step 4ì—ì„œ ì„¤ëª…)
        const firebaseConfig = {
            apiKey: "AIzaSyBQ8Y-YixAjJscZ8s4_eFMjVbtxZpD1Mko",
            authDomain: "influencer-seeding-8b702.firebaseapp.com",
            databaseURL: "https://influencer-seeding-8b702-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "influencer-seeding-8b702",
            storageBucket: "influencer-seeding-8b702.firebasestorage.app",
            messagingSenderId: "730517045041",
            appId: "1:730517045041:web:0524c5f5157f9e42dcba10"
        };

        // Firebase ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const influencersRef = database.ref('influencers');

        let influencers = [];
        let rowCount = 0;

        // Firebase ì—°ê²° ìƒíƒœ í™•ì¸
        database.ref('.info/connected').on('value', function (snapshot) {
            const status = document.getElementById('firebaseStatus');
            if (snapshot.val() === true) {
                status.innerHTML = 'âœ… Firebase ì—°ê²°ë¨ - ì‹¤ì‹œê°„ ë™ê¸°í™” í™œì„±';
                status.className = 'firebase-status';
            } else {
                status.innerHTML = 'âŒ Firebase ì—°ê²° ëŠì–´ì§';
                status.className = 'firebase-error';
            }
        });

        // ë°ì´í„° ë¡œë“œ
        influencersRef.on('value', function (snapshot) {
            const data = snapshot.val();
            influencers = data ? Object.keys(data).map(key => ({ id: key, ...data[key] })) : [];
            renderTable();
            updateStats();
        });

        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            influencers.forEach((influencer, index) => {
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><input type="text" value="${influencer.name || ''}" onchange="updateInfluencer('${influencer.id}', 'name', this.value)" style="width:100px;"></td>
                    <td>
                        <select onchange="updateInfluencer('${influencer.id}', 'platform', this.value)">
                            <option value="Instagram" ${influencer.platform === 'Instagram' ? 'selected' : ''}>Instagram</option>
                            <option value="TikTok" ${influencer.platform === 'TikTok' ? 'selected' : ''}>TikTok</option>
                        </select>
                    </td>
                    <td>
                        <select onchange="updateInfluencer('${influencer.id}', 'brand', this.value)">
                            <option value="ë¯¸ì •" ${influencer.brand === 'ë¯¸ì •' ? 'selected' : ''}>ë¯¸ì •</option>
                            <option value="ATP" ${influencer.brand === 'ATP' ? 'selected' : ''}>ATP</option>
                            <option value="RB" ${influencer.brand === 'RB' ? 'selected' : ''}>RB</option>
                            <option value="ZRD" ${influencer.brand === 'ZRD' ? 'selected' : ''}>ZRD</option>
                        </select>
                    </td>
                    <td><input type="text" value="${influencer.followers || ''}" onchange="updateInfluencer('${influencer.id}', 'followers', this.value)" style="width:60px;"></td>
                    <td><input type="text" value="${influencer.engagement || ''}" onchange="updateInfluencer('${influencer.id}', 'engagement', this.value)" style="width:50px;"></td>
                    <td><input type="number" class="score-input" max="20" value="${influencer.buyingPower || 0}" onchange="updateScore('${influencer.id}', 'buyingPower', this.value)"></td>
                    <td><input type="number" class="score-input" max="25" value="${influencer.trust || 0}" onchange="updateScore('${influencer.id}', 'trust', this.value)"></td>
                    <td><input type="number" class="score-input" max="20" value="${influencer.community || 0}" onchange="updateScore('${influencer.id}', 'community', this.value)"></td>
                    <td><input type="number" class="score-input" max="20" value="${influencer.targetMatch || 0}" onchange="updateScore('${influencer.id}', 'targetMatch', this.value)"></td>
                    <td><input type="number" class="score-input" max="15" value="${influencer.realUse || 0}" onchange="updateScore('${influencer.id}', 'realUse', this.value)"></td>
                    <td><input type="number" class="score-input" max="10" value="${influencer.reddit || 0}" onchange="updateScore('${influencer.id}', 'reddit', this.value)"></td>
                    <td class="total-score">${calculateTotal(influencer)}</td>
                    <td class="${getGradeClass(calculateTotal(influencer))}">${getGrade(calculateTotal(influencer))}</td>
                    <td>
                        <select onchange="updateInfluencer('${influencer.id}', 'assignee', this.value)">
                            <option value="ë¯¸ì •" ${influencer.assignee === 'ë¯¸ì •' ? 'selected' : ''}>ë¯¸ì •</option>
                            <option value="ì‹ í¬ê²½" ${influencer.assignee === 'ì‹ í¬ê²½' ? 'selected' : ''}>ì‹ í¬ê²½</option>
                            <option value="ìµœì—°ì£¼" ${influencer.assignee === 'ìµœì—°ì£¼' ? 'selected' : ''}>ìµœì—°ì£¼</option>
                            <option value="ê¹€ìœ ì§„" ${influencer.assignee === 'ê¹€ìœ ì§„' ? 'selected' : ''}>ê¹€ìœ ì§„</option>
                        </select>
                    </td>
                    <td>
                        <select onchange="updateInfluencer('${influencer.id}', 'status', this.value)">
                            <option value="ëŒ€ê¸°ì¤‘" ${influencer.status === 'ëŒ€ê¸°ì¤‘' ? 'selected' : ''}>ëŒ€ê¸°ì¤‘</option>
                            <option value="ì—°ë½ì™„ë£Œ" ${influencer.status === 'ì—°ë½ì™„ë£Œ' ? 'selected' : ''}>ì—°ë½ì™„ë£Œ</option>
                            <option value="ë‹µì¥ë°›ìŒ" ${influencer.status === 'ë‹µì¥ë°›ìŒ' ? 'selected' : ''}>ë‹µì¥ë°›ìŒ</option>
                            <option value="ê±°ì ˆ" ${influencer.status === 'ê±°ì ˆ' ? 'selected' : ''}>ê±°ì ˆ</option>
                        </select>
                    </td>
                    <td><input type="text" value="${influencer.budget || ''}" onchange="updateInfluencer('${influencer.id}', 'budget', this.value)" style="width:80px;"></td>
                    <td><input type="text" value="${influencer.memo || ''}" onchange="updateInfluencer('${influencer.id}', 'memo', this.value)" style="width:100px;"></td>
                    <td><button class="delete-btn" onclick="deleteInfluencer('${influencer.id}')">ì‚­ì œ</button></td>
                `;
            });
        }

        function addInfluencer() {
            const newInfluencer = {
                name: '',
                platform: 'Instagram',
                brand: 'ë¯¸ì •',
                followers: '',
                engagement: '',
                buyingPower: 0,
                trust: 0,
                community: 0,
                targetMatch: 0,
                realUse: 0,
                reddit: 0,
                assignee: 'ë¯¸ì •',
                status: 'ëŒ€ê¸°ì¤‘',
                budget: '',
                memo: ''
            };

            influencersRef.push(newInfluencer);
        }

        function deleteInfluencer(id) {
            if (confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                influencersRef.child(id).remove();
            }
        }

        function updateInfluencer(id, field, value) {
            influencersRef.child(id).update({ [field]: value });
        }

        function updateScore(id, field, value) {
            influencersRef.child(id).update({ [field]: parseInt(value) || 0 });
        }

        function calculateTotal(influencer) {
            return (parseInt(influencer.buyingPower) || 0) +
                (parseInt(influencer.trust) || 0) +
                (parseInt(influencer.community) || 0) +
                (parseInt(influencer.targetMatch) || 0) +
                (parseInt(influencer.realUse) || 0) +
                (parseInt(influencer.reddit) || 0);
        }

        function getGrade(total) {
            if (total >= 90) return 'S';
            if (total >= 80) return 'A';
            if (total >= 60) return 'B';
            if (total >= 40) return 'C';
            return 'D';
        }

        function getGradeClass(total) {
            if (total >= 90) return 'priority-s';
            if (total >= 80) return 'priority-a';
            if (total >= 60) return 'priority-b';
            if (total >= 40) return 'priority-c';
            return 'priority-d';
        }

        function updateStats() {
            const totalCandidates = influencers.length;
            let aPriority = 0;
            let contacted = 0;
            let responded = 0;

            influencers.forEach(influencer => {
                const total = calculateTotal(influencer);
                if (total >= 80) aPriority++;

                if (influencer.status === 'ì—°ë½ì™„ë£Œ' || influencer.status === 'ë‹µì¥ë°›ìŒ') contacted++;
                if (influencer.status === 'ë‹µì¥ë°›ìŒ') responded++;
            });

            document.getElementById('totalCandidates').textContent = totalCandidates;
            document.getElementById('aPriority').textContent = aPriority;
            document.getElementById('contacted').textContent = contacted;
            document.getElementById('responded').textContent = responded;
        }

        function showTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>

</html>